{% extends '@App/base.html.twig' %}

{% block body %}
    <h1>Add order </h1>
    {% if not is_granted('IS_AUTHENTICATED_REMEMBERED') %}
        <p>
            If you do not have a registration, you can choose to create an account.<br>
            Registration will give you some advantages when using the store. <br>
            If you do not wish to choose continue without registration.
        </p>
    {% endif %}
    <div class="order">
        <h2>Order details</h2>
        <p>===========================================================</p>
        {% for product in app.session.get('cart') %}
            {% if product.id|length %}
                <p>Product name :{{product.product.title }}
                    <span><a href="{{ path('session_clear',{'id':product.id}) }}"> </a></span>
                </p>
                <p>Price: {{ product.price }}</p>
                <p>Quantity: {{ product.quantity }}</p>
                {% if product.promotion is not null %}
                    <p>Discount : <strong>{{ product.promotion.discount }} %</strong>
                {% endif %}
                Product total :<strong> {{ product.product.subtotal|number_format(2,'.',' ') }}</strong>
                </p>
            {% endif %}
            <p>========================================================</p>
        {% endfor %}
        <p>======================</p>
        <p>Total: <strong>{{ app.session.get('total')|number_format(2,'.',' ') }}</strong> </p>
        <p>======================</p>
    </div>
    <div class="order">
        <h2>Order information</h2>
        {{ form(form) }}
    </div>

    <style>
        .order{
            display: inline-block;
            vertical-align: top;

        }
    </style>
{% endblock %}